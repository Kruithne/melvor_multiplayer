<template id="template-kru-multiplayer-online-button">
	<div class="d-inline-block ml-1" id="kru-mm-online-button-container" @click="state.toggle_online_dropdown()">
		<div class="kmm-notification-circle" v-if="state.num_notifications > 0">
			{{ state.num_notifications }}
		</div>
		<button class="btn btn-sm btn-dual text-combat-smoke" id="kru-mm-online-button">
			<img class="skill-icon-xxs" :src="state.get_svg('multiplayer')"/>
		</button>
	</div>
</template>
<template id="template-kru-multiplayer-dropdown">
	<div class="dropdown-menu dropdown-menu-right p-0 border-0 font-size-sm" id="kru-mm-online-dropdown">
		<div class="p-2 connected-menu">
			<h5 class="dropdown-header text-warning">
				<lang-string lang-id="MOD_KMM_MENU_HEADER"></lang-string>
			</h5>
			<a class="dropdown-item" @click.stop="state.show_icon_modal()">
				<img class="skill-icon-xxs" :src="state.get_item_icon(state.profile_icon)"/>
				<lang-string lang-id="MOD_KMM_MENU_CHANGE_ICON"></lang-string>
			</a>
			<h5 class="dropdown-header text-warning">
				<lang-string lang-id="MOD_KMM_MENU_HEADER_FRIENDS"></lang-string>
			</h5>
			<a class="dropdown-item" @click.stop="state.show_friends_modal()">
				<lang-string lang-id="MOD_KMM_MENU_VIEW_FRIENDS"></lang-string>
			</a>
			<a class="dropdown-item" @click.stop="state.show_friend_request_modal()">
				<lang-string lang-id="MOD_KMM_MENU_SHOW_FRIEND_REQUESTS"></lang-string>
				<span class="kmm-menu-notification-number" v-if="state.num_friend_requests > 0">{{ state.num_friend_requests }}</span>
			</a>
			<a class="dropdown-item" @click.stop="state.show_add_friend_modal()">
				<lang-string lang-id="MOD_KMM_MENU_ADD_FRIEND"></lang-string>
			</a>
			<a class="dropdown-item" @click.stop="state.show_friend_code_modal()">
				<lang-string lang-id="MOD_KMM_MENU_SHOW_FRIEND_CODE"></lang-string>
			</a>
		</div>
		<div class="p-2 disconnected-menu">
			<h5 class="dropdown-header text-warning">
				<lang-string lang-id="MOD_KMM_MENU_HEADER"></lang-string>
			</h5>
			<a class="dropdown-item" @click.stop="state.reconnect()">
				<lang-string lang-id="MOD_KMM_MENU_RECONNECT"></lang-string>
			</a>
		</div>
	</div>
</template>
<template id="template-kru-multiplayer-friend-code-modal">
	<div class="kmm-modal-text">
		<lang-string lang-id="MOD_KMM_MODAL_DESC_CODE"></lang-string>
	</div>
	<input class="kru-mm-input-text text-center" :value="state.friend_code" type="text"/>
</template>
<template id="template-kru-multiplayer-add-friend-modal">
	<div class="kmm-modal-text">
		<lang-string lang-id="MOD_KMM_MODAL_DESC_ADD_FRIEND"></lang-string>
		<span id="kmm-modal-error" class="d-none text-danger"></span>
	</div>
	<input class="kru-mm-input-text text-center" type="text" id="kmm-add-friend-modal-field" maxlength="11"/>
	<div class="kmm-modal-tray">
		<button type="button" class="btn btn-primary" @click="state.add_friend($event)">
			<div class="spinner-border spinner-border-sm text-primary mr-2 d-none" role="status"></div>
			<lang-string lang-id="MOD_KMM_BUTTON_ADD_FRIEND"></lang-string>
		</button>
		<button type="button" class="btn btn-danger" @click="state.close_modal()">
			<lang-string lang-id="MOD_KMM_BUTTON_CANCEL"></lang-string>
		</button>
	</div>
</template>
<template id="template-kru-multiplayer-friend-request-modal">
	<div class="kmm-friend-requests" v-if="state.events.friend_requests.length > 0">
		<div v-for="request in state.events.friend_requests" class="kmm-friend-request-bubble">
			<span>{{ request.display_name }}</span>
			<button type="button" class="btn btn-success" @click="state.accept_friend_request($event, request)">
				<div class="spinner-border spinner-border-sm text-primary mr-2 d-none" role="status"></div>
				<lang-string lang-id="MOD_KMM_BUTTON_ACCEPT_FRIEND"></lang-string>
			</button>
			<button type="button" class="btn btn-danger" @click="state.ignore_friend_request($event, request)">
				<div class="spinner-border spinner-border-sm text-primary mr-2 d-none" role="status"></div>
				<lang-string lang-id="MOD_KMM_BUTTON_IGNORE_FRIEND"></lang-string>
			</button>
		</div>
	</div>
	<div class="kmm-modal-text" v-else>
		<lang-string lang-id="MOD_KMM_MODAL_NO_FRIEND_REQUESTS"></lang-string>
	</div>
</template>
<template id="template-kru-multiplayer-friends-modal">
	<div class="kmm-friends" v-if="state.friends.length > 0">
		<div v-for="friend in state.friends">
			<img class="skill-icon-xs" :src="state.get_item_icon(friend.icon_id)"/>
			<span>{{ friend.display_name }}</span>
			<button type="button" class="btn btn-danger" @click="state.remove_friend_prompt(friend)">
				<lang-string lang-id="MOD_KMM_BUTTON_REMOVE_FRIEND"></lang-string>
			</button>
		</div>
	</div>
	<div class="kmm-modal-text" v-else>
		<lang-string lang-id="MOD_KMM_MODAL_NO_FRIENDS"></lang-string>
	</div>
</template>
<template id="template-kru-multiplayer-remove-friend-modal">
	<div class="kmm-modal-text">
		<lang-string-f lang-id="MOD_KMM_MODAL_DESC_REMOVE_FRIEND" :lang-arg-1="state.removingFriend.display_name"></lang-string-f>
	</div>
	<button type="button" class="btn btn-success" @click="state.remove_friend($event)">
		<div class="spinner-border spinner-border-sm text-primary mr-2 d-none" role="status"></div>
		<lang-string lang-id="MOD_KMM_BUTTON_REMOVE_FRIEND_CONFIRM"></lang-string>
	</button>
	<button type="button" class="btn btn-danger" @click="state.close_modal()">
		<lang-string lang-id="MOD_KMM_BUTTON_CANCEL"></lang-string>
	</button>
</template>
<template id="template-kru-multiplayer-change-icon-modal">
	<input class="form-control" type="text" v-model="state.icon_search" placeholder="Search for an icon..."/>
	<div class="kmm-icon-selector">
		<div class="bank-item no-bg btn-light pointer-enabled m-1 resize-48" :class="{ 'kmm-icon-picked': icon.id == state.picked_icon }" v-for="icon in state.filtered_icons" @click="state.pick_icon(icon)">
			<img class="p-2 resize-48" :src="icon.media">
		</div>
	</div>
	<button type="button" class="btn btn-success" @click="state.confirm_icon_pick($event)">
		<div class="spinner-border spinner-border-sm text-primary mr-2 d-none" role="status"></div>
		<lang-string lang-id="MOD_KMM_BUTTON_USE_ICON"></lang-string>
	</button>
	<button type="button" class="btn btn-danger" @click="state.close_modal()">
		<lang-string lang-id="MOD_KMM_BUTTON_CANCEL"></lang-string>
	</button>
</template>